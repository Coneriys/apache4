services:
  noOverrideAllowlist:
    image: apache4/whoami
    labels:
      apache4.enable: true
      apache4.http.routers.rt1.rule: Host(`no.override.allowlist.docker.local`)
      apache4.http.routers.rt1.middlewares: wl1
      apache4.http.middlewares.wl1.ipallowlist.sourceRange: 8.8.8.8

  overrideIPStrategyRemoteAddrAllowlist:
    image: apache4/whoami
    labels:
      apache4.enable: true
      apache4.http.routers.rt2.rule: Host(`override.remoteaddr.allowlist.docker.local`)
      apache4.http.routers.rt2.middlewares: wl2
      apache4.http.middlewares.wl2.ipallowlist.sourceRange: 8.8.8.8
      apache4.http.middlewares.wl2.ipallowlist.ipStrategy: true

  overrideIPStrategyDepthAllowlist:
    image: apache4/whoami
    labels:
      apache4.enable: true
      apache4.http.routers.rt3.rule: Host(`override.depth.allowlist.docker.local`)
      apache4.http.routers.rt3.middlewares: wl3
      apache4.http.middlewares.wl3.ipallowlist.sourceRange: 8.8.8.8
      apache4.http.middlewares.wl3.ipallowlist.ipStrategy.depth: 3

  overrideIPStrategyExcludedIPsAllowlist:
    image: apache4/whoami
    labels:
      apache4.enable: true
      apache4.http.routers.rt4.rule: Host(`override.excludedips.allowlist.docker.local`)
      apache4.http.routers.rt4.middlewares: wl4
      apache4.http.middlewares.wl4.ipallowlist.sourceRange: 8.8.8.8
      apache4.http.middlewares.wl4.ipallowlist.ipStrategy.excludedIPs: 10.0.0.1,10.0.0.2
